NEXMON_CHIP=CHIP_VER_BCM43430a1
NEXMON_CHIP_NUM=`$(NEXMON_ROOT)/buildtools/scripts/getdefine.sh $(NEXMON_CHIP)`
NEXMON_FW_VERSION=FW_VER_7_45_98_97
NEXMON_FW_VERSION_NUM=`$(NEXMON_ROOT)/buildtools/scripts/getdefine.sh $(NEXMON_FW_VERSION)`

NEXMON_ARCH=armv7-m

RAM_FILE=cyfmac43430-sdio.bin
RAMSTART=0x0
RAMSIZE=0x80000

ROM_FILE=rom.bin
ROMSTART=0x800000
ROMSIZE=0xA0000

# WLC_UCODE_WRITE_BL_HOOK_ADDR@0x5228c is called by wlc_ucode_download - verified at 7_45_98_97!
# SUB_00844914 -> func_0x00844914(wlc_hw,PTR_DAT_0005229c,*(undefined4 *)PTR_DAT_00052298);
# 					 ^= 0x5B964 = UCODESTART (s.u.)  ^=DAT_0005B960 = 0xAC4B = UCODESIZE
# TEMPLATERAMSTART = UCODESTART + UCODESIZE + 1
# 
WLC_UCODE_WRITE_BL_HOOK_ADDR = 0x5228c 
UCODESTART = 0x5b964
TEMPLATERAMSTART = 0x665b0

# wlc_ucode_write_bl (10 b5 00 21 40 22) -> 0x268C -> HNDRTE_RECLAIM_0_END_PTR (param_1 + _0xb_) = PTR_DAT_00002708;
# HNDRTE_RECLAIM_0_END => die am PTR gespeicherte Adresse
HNDRTE_RECLAIM_0_END_PTR = 0x2708
HNDRTE_RECLAIM_0_END = 0x66bf0

TEMPLATERAMSTART_PTR = 0x5b864
FP_CONFIG_ORIGEND = 0x2118
FP_DATA_END_PTR = 0x45d84

# Search for ... 00 18 00 00 ab aa aa aa
FP_CONFIG_BASE_PTR_1 = 0x47d34
FP_CONFIG_END_PTR_1 = 0x47d30
FP_CONFIG_BASE_PTR_2 = 0x47fac
FP_CONFIG_END_PTR_2 = 0x47fa8

# can start at the end of the firmware, it will be overwritten after it is read
FP_CONFIG_BASE=0x66d26
TEMPLATERAMSIZE = 0x640
FP_DATA_BASE = 0x1000
FP_CONFIG_SIZE = 0xc00
FP_CONFIG_ORIGBASE = 0x1800
PATCHSIZE=0x2000
PATCHSTART=$$(($(HNDRTE_RECLAIM_0_END) - $(PATCHSIZE)))
UCODESIZE=$$(($(TEMPLATERAMSTART) - $(UCODESTART) - 1))
